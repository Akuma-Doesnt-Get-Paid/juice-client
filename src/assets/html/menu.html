<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
/>
<div class="menu" data-theme="dark" data-active="true">
  <aside class="sidebar">
    <div class="search-input">
      <i class="fas fa-search"></i>
      <input type="text" class="juice search" placeholder="Search..." />
    </div>
    <div class="sep"></div>
    <div class="tab-group">
      <div data-tab="ui" class="juice tab active">
        <i class="fas fa-tv"></i>
        UI
      </div>
      <div data-tab="game" class="juice tab">
        <i class="fas fa-gamepad"></i>
        Game
      </div>
    </div>
    <div class="sep"></div>
    <div class="tab-group">
      <div data-tab="performance" class="juice tab">
        <i class="fas fa-tachometer-alt"></i>
        Performance
      </div>
      <div data-tab="client" class="juice tab">
        <i class="fas fa-cog"></i>
        Client
      </div>
      <div data-tab="scripts" class="juice tab">
        <i class="fas fa-file-code"></i>
        Scripts
      </div>
      <div data-tab="about" class="juice tab">
        <i class="fas fa-circle-info"></i>
        About
      </div>
    </div>
    <div class="footer">
      <span class="keybind"></span>
      <span class="sep"></span>
      <div class="bottom">
        <span class="ver"></span>
        <span class="user"></span>
      </div>
    </div>
  </aside>
  <div class="content">
    <div id="ui-options" class="juice options active">
      <div class="option-group">
        <div class="option">
          <span>Enable CSS</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="css_enabled"
              data-setting="css_enabled"
            />
            <label for="css_enabled"></label>
          </div>
        </div>
        <div class="option">
          <span>CSS Link</span>
          <input
            type="text"
            placeholder="https://.../.css"
            data-setting="css_link"
          />
        </div>
        <div class="option dropdown">
          <div class="top">
            <i class="fas fa-angle-down"></i>
            <span>Quick CSS</span>
          </div>
          <div class="content">
            <textarea
              placeholder="input css here"
              data-setting="advanced_css"
            ></textarea>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <span>Hide Chat</span>
          <div class="checkbox">
            <input type="checkbox" id="hide_chat" data-setting="hide_chat" />
            <label for="hide_chat"></label>
          </div>
        </div>
        <div class="option">
          <span>Hide Interface</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="hide_interface"
              data-setting="hide_interface"
            />
            <label for="hide_interface"></label>
          </div>
        </div>
        <div class="option">
          <span>UI Animations</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="ui_animations"
              data-setting="ui_animations"
            />
            <label for="ui_animations"></label>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <span>Interface Opacity</span>
          <input
            type="range"
            min="0"
            max="100"
            class="range"
            data-setting="interface_opacity"
          />
        </div>
        <div class="option">
          <span>Interface Bounds</span>
          <input
            type="range"
            min="0"
            max="2"
            class="range"
            data-setting="interface_bounds"
          />
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <div class="left">
            <span>Lobby Keybind Reminder</span>
            <div class="description">Display the lobby keybind reminder</div>
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="lobby_keybind_reminder"
              data-setting="lobby_keybind_reminder"
            />
            <label for="lobby_keybind_reminder"></label>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <div class="left">
            <span>Badges and Gradient Names</span>
            <div class="description">Display user customizations</div>
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="customizations"
              data-setting="customizations"
            />
            <label for="customizations"></label>
          </div>
        </div>
      </div>
    </div>
    <div id="game-options" class="juice options">
      <div class="option-group">
        <div class="option">
          <span>Permanent Crosshair</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="perm_crosshair"
              data-setting="perm_crosshair"
            />
            <label for="perm_crosshair"></label>
          </div>
        </div>
        <div class="option">
          <span>Hitmarker Link</span>
          <input
            type="text"
            placeholder="https://.../.png"
            data-setting="hitmarker_link"
          />
        </div>
        <div class="option">
          <span>Kill Icon Link</span>
          <input
            type="text"
            placeholder="https://.../.png"
            data-setting="killicon_link"
          />
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <span>K/D Indicator</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="kd_indicator"
              data-setting="kd_indicator"
            />
            <label for="kd_indicator"></label>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <span>Rave Mode</span>
          <div class="checkbox">
            <input type="checkbox" id="rave_mode" data-setting="rave_mode" />
            <label for="rave_mode"></label>
          </div>
        </div>
      </div>
    </div>
    <div id="performance-options" class="juice options">
      <div class="option-group">
        <div class="option requires-restart">
          <span>Unlimited FPS</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="unlimited_fps"
              data-setting="unlimited_fps"
            />
            <label for="unlimited_fps"></label>
          </div>
        </div>
        <div class="option requires-restart">
          <span>In Process GPU</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="in_process_gpu"
              data-setting="in_process_gpu"
            />
            <label for="in_process_gpu"></label>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="option requires-restart">
          <span>Auto Fullscreen</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="auto_fullscreen"
              data-setting="auto_fullscreen"
            />
            <label for="auto_fullscreen"></label>
          </div>
        </div>
        <div class="option">
          <span>Skip Loading Screen</span>
          <div class="checkbox">
            <input
              type="checkbox"
              id="skip_loading"
              data-setting="skip_loading"
            />
            <label for="skip_loading"></label>
          </div>
        </div>
      </div>
    </div>
    <div id="client-options" class="juice options">
      <div class="option-group">
        <div class="option requires-restart">
          <div class="left">
            <span>Discord Activity</span>
            <span class="description">
              Display Juice Client as your Discord activity
            </span>
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="discord_rpc"
              data-setting="discord_rpc"
            />
            <label for="discord_rpc"></label>
          </div>
        </div>
        <div class="option custom">
          <div class="left">
            <span>Menu Toggle Keybind</span>
            <span class="description">
              Customizable keybind to toggle the menu
            </span>
          </div>
          <button class="juice change-keybind"></button>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <div class="left requires-refresh">
            <span>General News</span>
            <span class="description">Juice-related news</span>
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="general_news"
              data-setting="general_news"
            />
            <label for="general_news"></label>
          </div>
        </div>
        <div class="option">
          <div class="left requires-refresh">
            <span>Promotional News</span>
            <span class="description"
              >Live events (has a "LIVE" indicator)</span
            >
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="promotional_news"
              data-setting="promotional_news"
            />
            <label for="promotional_news"></label>
          </div>
        </div>
        <div class="option">
          <div class="left requires-refresh">
            <span>Event News</span>
            <span class="description">Events that you can participate in</span>
          </div>
          <div class="checkbox">
            <input type="checkbox" id="event_news" data-setting="event_news" />
            <label for="event_news"></label>
          </div>
        </div>
        <div class="option">
          <div class="left requires-refresh">
            <span>Alerts</span>
            <span class="description"
              >Important alerts mainly posted by Kirka Staff</span
            >
          </div>
          <div class="checkbox">
            <input type="checkbox" id="alert_news" data-setting="alert_news" />
            <label for="alert_news"></label>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <span>Menu Theme</span>
          <select id="menu_theme" data-setting="menu_theme">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
            <option value="juice">Juice</option>
            <option value="inverted-juice">Inverted Juice</option>
            <option value="nameless">Nameless</option>
            <option value="kirka-arena">Kirka Arena</option>
            <option value="kirka">Kirka</option>
            <option value="catppuccin-mocha">Catppuccin Mocha</option>
            <option value="flexoki">Flexoki</option>
            <option value="legacy">Legacy</option>
          </select>
        </div>
      </div>
      <div class="option-group">
        <div class="option requires-refresh">
          <span>Proxy URL</span>
          <select id="base_url" data-setting="base_url">
            <option value="https://kirka.io/">kirka.io</option>
            <option value="https://cloudyfrogs.com/">cloudyfrogs.com</option>
            <option value="https://snipers.io/">snipers.io</option>
            <option value="https://ask101math.com/">ask101math.com</option>
            <option value="https://fpsiogame.com/">fpsiogame.com</option>
            <option value="https://cloudconverts.com/">
              cloudconverts.com
            </option>
          </select>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <button id="open-swapper-folder" class="juice-button">
            <span class="text">Open Swapper Folder</span>
            <div class="custom-border"></div>
          </button>
          <button id="open-scripts-folder" class="juice-button">
            <span class="text">Open Scripts Folder</span>
            <div class="custom-border"></div>
          </button>
        </div>
        <div class="option">
          <button id="import-settings" class="juice-button">
            <span class="text">Import Settings</span>
            <div class="custom-border"></div>
          </button>
          <button id="export-settings" class="juice-button">
            <span class="text">Export Settings</span>
            <div class="custom-border"></div>
          </button>
        </div>
        <div class="option">
          <button id="reset-juice-settings" class="juice-button large">
            <span class="text">Reset Juice Client Settings</span>
            <span class="description"> This action cannot be undone</span>
            <div class="custom-border"></div>
          </button>
        </div>
        <div class="option">
          <button
            id="remote-to-static-links"
            class="juice-button large requires-refresh"
          >
            <span class="test">Replace Remote Links with Static Links</span>
            <span class="description">
              This will speed up your customizations. This action cannot be
              undone
            </span>
            <div class="custom-border"></div>
          </button>
        </div>
      </div>
    </div>
    <div id="scripts-options" class="juice options">
      <div class="option-group">
        <div class="option">
          <div class="left">
            <span>Pack/Chest Opener</span>
            <span class="description">Refresh to stop</span>
          </div>
          <select id="opener">
            <option value="none">None</option>
            <option value="Chest_Golden">Golden</option>
            <option value="Chest_Ice">Ice</option>
            <option value="Chest_Wood">Wood</option>
            <option value="Chest_All">All Chests</option>
            <option value="Card_Cold">Cold</option>
            <option value="Card_Girlsband">Girls band</option>
            <option value="Card_Party">Party</option>
            <option value="Card_Soldiers">Soldiers</option>
            <option value="Card_Periodic">Periodic</option>
            <option value="Card_All">All Cards</option>
          </select>
        </div>
      </div>
      <div class="option-group">
        <div class="option">
          <div class="left requires-refresh">
            <span>Custom List Price</span>
            <span class="description">
              Allows you to set a custom price for items in the market
            </span>
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="custom_list_price"
              data-setting="custom_list_price"
            />
            <label for="custom_list_price"></label>
          </div>
        </div>
        <div class="option">
          <div class="left requires-refresh">
            <span>Market Names</span>
            <span class="description"
              >Displays seller Username and ID in the market</span
            >
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="market_names"
              data-setting="market_names"
            />
            <label for="market_names"></label>
          </div>
        </div>
      </div>
    </div>
    <div id="about-client" class="juice options">
      <div class="option-group">
        <div class="about-top header">
          <img src="https://juice.irrvlo.xyz/juice.png" />
          <div class="about-info">
            <span class="title">Juice Client</span>
            <div class="about-more">
              <div>
                <span class="ver"></span>
                <span class="author">by irrvlo</span>
              </div>
              <div class="about-buttons">
                <a href="https://kirka.io/profile/H8N3U4" class="about-kirka">
                  <img src="https://kirka.io/favicon.ico" />
                  <div class="custom-border"></div>
                </a>
                <a
                  href="https://discord.gg/FjzAAdSjng"
                  target="_blank"
                  class="about-discord"
                >
                  <i class="fab fa-discord"></i>
                  <div class="custom-border"></div>
                </a>
                <a
                  href="https://github.com/irrvlo/juice-client"
                  target="_blank"
                  class="about-github"
                >
                  <i class="fab fa-github"></i>
                  <div class="custom-border"></div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="about-top compact">
          <img src="https://juice.irrvlo.xyz/irrvlo_k.png" />
          <div class="about-info compact">
            <span class="title">Kirka Tools</span>
            <div class="about-more">
              <div></div>
              <div class="about-buttons">
                <a href="https://kirka.irrvlo.xyz" class="about-kirkatools alt">
                  <i class="fas fa-arrow-up-right-from-square"></i>
                  <p>Check it out!</p>
                  <div class="custom-border"></div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="about-top compact">
          <img src="https://juice.irrvlo.xyz/bubbles.png" />
          <div class="about-info compact">
            <span class="title">Patch Notes</span>
            <div class="about-more">
              <div></div>
              <div class="about-buttons">
                <a
                  href="https://juice.irrvlo.xyz/patch-notes"
                  class="about-juice alt"
                >
                  <i class="fas fa-arrow-up-right-from-square"></i>
                  <p>View</p>
                  <div class="custom-border"></div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="option-group">
        <div class="credits">
          <span class="title">A special thanks to these people!</span>
          <p>
            - CarrySheriff for Chest/Pack opener, Map Images Repo, Market Names,
            and Custom List Price
          </p>
          <p>- AwesomeSam for a basic Resource Swapper</p>
          <p>- Error430 for optimizations</p>
          <p>
            - robertpakalns for various bug fixes, optimizations, and tweaks
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<scirpt>
const { ipcRenderer } = require("electron");
const fs = require("fs");
const path = require("path");
const { version } = require("../../package.json");

class Menu {
  constructor() {
    this.settings = ipcRenderer.sendSync("get-settings");
    this.menuCSS = fs.readFileSync(
      path.join(__dirname, "../assets/css/menu.css"),
      "utf8"
    );
    this.menuHTML = fs.readFileSync(
      path.join(__dirname, "../assets/html/menu.html"),
      "utf8"
    );
    this.menu = this.createMenu();
    this.localStorage = window.localStorage;
    this.menuToggle = this.menu.querySelector(".menu");
    this.tabToContentMap = {
      ui: this.menu.querySelector("#ui-options"),
      game: this.menu.querySelector("#game-options"),
      performance: this.menu.querySelector("#performance-options"),
      client: this.menu.querySelector("#client-options"),
      scripts: this.menu.querySelector("#scripts-options"),
      about: this.menu.querySelector("#about-client"),
    };
  }

  createMenu() {
    const menu = document.createElement("div");
    menu.innerHTML = this.menuHTML;
    menu.id = "juice-menu";
    menu.style.cssText =
      "z-index: 99999999; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);";
	const menuCSS = document.createElement("style");
	menuCSS.innerHTML = this.menuCSS
	menu.prepend(menuCSS);
    document.body.appendChild(menu);
    return menu;
  }

  init() {
    this.setVersion();
    this.setUser();
    this.setKeybind();
    this.setTheme();
    this.handleKeyEvents();
    this.initMenu();
    this.handleMenuKeybindChange();
    this.handleMenuInputChanges();
    this.handleMenuSelectChanges();
    this.handleTabChanges();
    this.handleDropdowns();
    this.handleSearch();
    this.handleButtons();
    this.localStorage.getItem("juice-menu-tab")
      ? this.handleTabChange(
          this.menu.querySelector(
            `[data-tab="${this.localStorage.getItem("juice-menu-tab")}"]`
          )
        )
      : this.handleTabChange(this.menu.querySelector(".juice.tab"));
  }

  setVersion() {
    this.menu.querySelectorAll(".ver").forEach((element) => {
      element.innerText = `v${version}`;
    });
  }

  setUser() {
    const user = JSON.parse(this.localStorage.getItem("current-user"));
    if (user) {
      this.menu.querySelector(".user").innerText = `${user.name}#${user.shortId}`;
    }
  }

  setKeybind() {
    this.menu.querySelector(
      ".keybind"
    ).innerText = `Press ${this.settings.menu_keybind} to toggle menu`;
    if (!this.localStorage.getItem("juice-menu")) {
      this.localStorage.setItem(
        "juice-menu",
        this.menuToggle.getAttribute("data-active")
      );
    } else {
      this.menuToggle.setAttribute(
        "data-active",
        this.localStorage.getItem("juice-menu")
      );
    }
  }

  setTheme() {
    this.menu
      .querySelector(".menu")
      .setAttribute("data-theme", this.settings.menu_theme);
  }

  handleKeyEvents() {
    document.addEventListener("keydown", (e) => {
      if (e.code === this.settings.menu_keybind) {
        const isActive = this.menuToggle.getAttribute("data-active") === "true";
        if (!isActive) {
          document.exitPointerLock();
        }
        this.menuToggle.setAttribute("data-active", !isActive);
        this.localStorage.setItem("juice-menu", !isActive);
      }
    });
  }

  initMenu() {
    const inputs = this.menu.querySelectorAll("input[data-setting]");
    const textareas = this.menu.querySelectorAll("textarea[data-setting]");
    const selects = this.menu.querySelectorAll("select[data-setting]");
    inputs.forEach((input) => {
      const setting = input.dataset.setting;
      const type = input.type;
      const value = this.settings[setting];
      if (type === "checkbox") {
        input.checked = value;
      } else {
        input.value = value;
      }
    });

    selects.forEach((select) => {
      const setting = select.dataset.setting;
      const value = this.settings[setting];
      select.value = value;
    });

    textareas.forEach((textarea) => {
      const setting = textarea.dataset.setting;
      const value = this.settings[setting];
      textarea.value = value;
    });
  }

  handleMenuKeybindChange() {
    const changeKeybindButton = this.menu.querySelector(".change-keybind");
    changeKeybindButton.innerText = this.settings.menu_keybind;
    changeKeybindButton.addEventListener("click", () => {
      changeKeybindButton.innerText = "Press any key";
      const listener = (e) => {
        this.settings.menu_keybind = e.code;
        changeKeybindButton.innerText = e.code;
        ipcRenderer.send("update-setting", "menu_keybind", e.code);

        const event = new CustomEvent("juice-settings-changed", {
          detail: { setting: "menu_keybind", value: e.code },
        });
        document.dispatchEvent(event);

        this.menu.querySelector(
          ".keybind"
        ).innerText = `Press ${this.settings.menu_keybind} to toggle menu`;
        document.removeEventListener("keydown", listener);
      };
      document.addEventListener("keydown", listener);
    });
  }

  handleMenuInputChange(input) {
    const setting = input.dataset.setting;
    const type = input.type;
    const value = type === "checkbox" ? input.checked : input.value;
    this.settings[setting] = value;
    ipcRenderer.send("update-setting", setting, value);
    const event = new CustomEvent("juice-settings-changed", {
      detail: { setting: setting, value: value },
    });
    document.dispatchEvent(event);
  }

  handleMenuInputChanges() {
    const inputs = this.menu.querySelectorAll("input[data-setting]");
    const textareas = this.menu.querySelectorAll("textarea[data-setting]");
    inputs.forEach((input) => {
      input.addEventListener("change", () => this.handleMenuInputChange(input));
    });

    textareas.forEach((textarea) => {
      textarea.addEventListener("change", () =>
        this.handleMenuInputChange(textarea)
      );
    });
  }

  handleMenuSelectChange(select) {
    const setting = select.dataset.setting;
    const value = select.value;
    this.settings[setting] = value;
    ipcRenderer.send("update-setting", setting, value);
    const event = new CustomEvent("juice-settings-changed", {
      detail: { setting: setting, value: value },
    });
    if (setting === "menu_theme") {
      this.setTheme();
    }
    document.dispatchEvent(event);
  }

  handleMenuSelectChanges() {
    const selects = this.menu.querySelectorAll("select[data-setting]");
    selects.forEach((select) => {
      select.addEventListener("change", () =>
        this.handleMenuSelectChange(select)
      );
    });
  }

  handleTabChanges() {
    const tabs = this.menu.querySelectorAll(".juice.tab");
    tabs.forEach((tab) => {
      tab.addEventListener("click", () => this.handleTabChange(tab));
    });
  }

  handleTabChange(tab) {
    const tabs = this.menu.querySelectorAll(".juice.tab");
    const tabName = tab.dataset.tab;

    this.localStorage.setItem("juice-menu-tab", tabName);

    const contents = this.menu.querySelectorAll(".juice.options");
    tabs.forEach((tab) => {
      tab.classList.remove("active");
    });
    contents.forEach((content) => {
      content.classList.remove("active");
    });
    tab.classList.add("active");
    this.tabToContentMap[tab.dataset.tab].classList.add("active");
  }

  handleDropdowns() {
    const dropdowns = this.menu.querySelectorAll(".dropdown");
    dropdowns.forEach((dropdown) => {
      const dropdownTop = dropdown.querySelector(".dropdown .top");
      dropdownTop.addEventListener("click", () => {
        dropdown.classList.toggle("active");
      });
    });
  }

  handleSearch() {
    const searchInput = this.menu.querySelector(".juice.search");
    const settings = this.menu.querySelectorAll(".option:not(.custom)");
    searchInput.addEventListener("input", () => {
      const searchValue = searchInput.value.toLowerCase();
      settings.forEach((setting) => {
        setting.style.display = setting.textContent
          .toLowerCase()
          .includes(searchValue)
          ? "flex"
          : "none";

        const parent = setting.parentElement;
        if (parent.classList.contains("option-group")) {
          const children = parent.children;
          const visibleChildren = Array.from(children).filter(
            (child) => child.style.display === "flex"
          );
          parent.style.display = visibleChildren.length ? "flex" : "none";
        }
      });
    });
  }

  handleButtons() {
    const openSwapperFolder = this.menu.querySelector("#open-swapper-folder");
    openSwapperFolder.addEventListener("click", () => {
      ipcRenderer.send("open-swapper-folder");
    });

    const openScriptsFolder = this.menu.querySelector("#open-scripts-folder");
    openScriptsFolder.addEventListener("click", () => {
      ipcRenderer.send("open-scripts-folder");
    });

    const importSettings = this.menu.querySelector("#import-settings");
    importSettings.addEventListener("click", () => {
      const modal = this.createModal(
        "Import settings",
        "Paste your settings here to import them"
      );

      const bottom = modal.querySelector(".bottom");

      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "Paste settings here";
      bottom.appendChild(input);

      const confirm = document.createElement("button");
      confirm.innerText = "Confirm";
      confirm.classList.add("juice-button");
      confirm.addEventListener("click", () => {
        try {
          if (!input.value) return;

          const settings = JSON.parse(input.value);
          for (const key in settings) {
            this.settings[key] = settings[key];
            ipcRenderer.send("update-setting", key, settings[key]);

            const event = new CustomEvent("juice-settings-changed", {
              detail: { setting: key, value: settings[key] },
            });
            document.dispatchEvent(event);

            this.initMenu();
          }
          modal.remove();
        } catch (error) {
          console.error("Error importing settings:", error);
        }
      });

      bottom.appendChild(confirm);

      this.menu.querySelector(".menu").appendChild(modal);
    });

    const exportSettings = this.menu.querySelector("#export-settings");
    exportSettings.addEventListener("click", () => {
      const modal = this.createModal(
        "Export settings",
        "Copy your settings here to export them"
      );

      const bottom = modal.querySelector(".bottom");

      const textarea = document.createElement("textarea");
      textarea.value = JSON.stringify(this.settings, null, 2);
      bottom.appendChild(textarea);

      const copy = document.createElement("button");
      copy.innerText = "Copy";
      copy.classList.add("juice-button");
      copy.addEventListener("click", () => {
        navigator.clipboard.writeText(textarea.value);
      });

      bottom.appendChild(copy);

      this.menu.querySelector(".menu").appendChild(modal);
    });

    let clickCounter = 0;
    const resetJuiceSettings = this.menu.querySelector("#reset-juice-settings");
    resetJuiceSettings.addEventListener("click", () => {
      clickCounter++;
      if (clickCounter === 1) {
        resetJuiceSettings.style.background = "rgba(var(--red), 0.25)";
        const text = resetJuiceSettings.querySelector(".text");
        text.innerText = "Are you sure?";

        const description = resetJuiceSettings.querySelector(".description");
        description.innerText =
          "This will restart the client and reset all settings. Click again to confirm";
      } else if (clickCounter === 2) {
        ipcRenderer.send("reset-juice-settings");
      }
    });

    const remoteToStaticLinks = this.menu.querySelector(
      "#remote-to-static-links"
    );
    remoteToStaticLinks.addEventListener("click", async () => {
      const localStorageKeys = [
        "SETTINGS___SETTING/CROSSHAIR___SETTING/STATIC_URL___SETTING",
        "SETTINGS___SETTING/SNIPER___SETTING/SCOPE_URL___SETTING",
        "SETTINGS___SETTING/BLOCKS___SETTING/TEXTURE_URL___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG1___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG2___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG3___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG4___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG5___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG6___SETTING",
      ];

      const juiceKeys = ["css_link", "hitmarker_link", "killicon_link"];

      const encodeImage = async (url) => {
        if (!url || url === "") return "";

        try {
          const response = await fetch(url);
          if (!response.ok)
            throw new Error(`Invalid response: ${response.status}`);
          const blob = await response.blob();
          return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onloadend = () => resolve(reader.result);
            reader.readAsDataURL(blob);
          });
        } catch (error) {
          console.error(`Error fetching or converting ${url}:`, error);
        }
      };

      for (const key of localStorageKeys) {
        const url = localStorage.getItem(key).replace(/"/g, "");
        const data = await encodeImage(url);
        localStorage.setItem(key, data);
      }

      for (const key of juiceKeys) {
        const url = this.settings[key];
        const data = await encodeImage(url);
        this.settings[key] = data;
        ipcRenderer.send("update-setting", key, data);

        const event = new CustomEvent("juice-settings-changed", {
          detail: { setting: key, value: this.settings[key] },
        });
        document.dispatchEvent(event);

        this.initMenu();
      }
    });
  }

  createModal(title, description) {
    const modal = document.createElement("div");
    modal.id = "modal";

    modal.innerHTML = `
    <div class="content">
      <div class="close">
        <i class="fas fa-times"></i>
      </div>
      <div class="top">
        <span class="title">${title}</span>
        <span class="description">${description}</span>
      </div>
      <div class="bottom">
      </div>
    </div>
<script>
  const { ipcRenderer } = require("electron");
const fs = require("fs");
const path = require("path");
const { version } = require("../../package.json");

class Menu {
  constructor() {
    this.settings = ipcRenderer.sendSync("get-settings");
    this.menuCSS = fs.readFileSync(
      path.join(__dirname, "../assets/css/menu.css"),
      "utf8"
    );
    this.menuHTML = fs.readFileSync(
      path.join(__dirname, "../assets/html/menu.html"),
      "utf8"
    );
    this.menu = this.createMenu();
    this.localStorage = window.localStorage;
    this.menuToggle = this.menu.querySelector(".menu");
    this.tabToContentMap = {
      ui: this.menu.querySelector("#ui-options"),
      game: this.menu.querySelector("#game-options"),
      performance: this.menu.querySelector("#performance-options"),
      client: this.menu.querySelector("#client-options"),
      scripts: this.menu.querySelector("#scripts-options"),
      about: this.menu.querySelector("#about-client"),
    };
  }

  createMenu() {
    const menu = document.createElement("div");
    menu.innerHTML = this.menuHTML;
    menu.id = "juice-menu";
    menu.style.cssText =
      "z-index: 99999999; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);";
	const menuCSS = document.createElement("style");
	menuCSS.innerHTML = this.menuCSS
	menu.prepend(menuCSS);
    document.body.appendChild(menu);
    return menu;
  }

  init() {
    this.setVersion();
    this.setUser();
    this.setKeybind();
    this.setTheme();
    this.handleKeyEvents();
    this.initMenu();
    this.handleMenuKeybindChange();
    this.handleMenuInputChanges();
    this.handleMenuSelectChanges();
    this.handleTabChanges();
    this.handleDropdowns();
    this.handleSearch();
    this.handleButtons();
    this.localStorage.getItem("juice-menu-tab")
      ? this.handleTabChange(
          this.menu.querySelector(
            `[data-tab="${this.localStorage.getItem("juice-menu-tab")}"]`
          )
        )
      : this.handleTabChange(this.menu.querySelector(".juice.tab"));
  }

  setVersion() {
    this.menu.querySelectorAll(".ver").forEach((element) => {
      element.innerText = `v${version}`;
    });
  }

  setUser() {
    const user = JSON.parse(this.localStorage.getItem("current-user"));
    if (user) {
      this.menu.querySelector(".user").innerText = `${user.name}#${user.shortId}`;
    }
  }

  setKeybind() {
    this.menu.querySelector(
      ".keybind"
    ).innerText = `Press ${this.settings.menu_keybind} to toggle menu`;
    if (!this.localStorage.getItem("juice-menu")) {
      this.localStorage.setItem(
        "juice-menu",
        this.menuToggle.getAttribute("data-active")
      );
    } else {
      this.menuToggle.setAttribute(
        "data-active",
        this.localStorage.getItem("juice-menu")
      );
    }
  }

  setTheme() {
    this.menu
      .querySelector(".menu")
      .setAttribute("data-theme", this.settings.menu_theme);
  }

  handleKeyEvents() {
    document.addEventListener("keydown", (e) => {
      if (e.code === this.settings.menu_keybind) {
        const isActive = this.menuToggle.getAttribute("data-active") === "true";
        if (!isActive) {
          document.exitPointerLock();
        }
        this.menuToggle.setAttribute("data-active", !isActive);
        this.localStorage.setItem("juice-menu", !isActive);
      }
    });
  }

  initMenu() {
    const inputs = this.menu.querySelectorAll("input[data-setting]");
    const textareas = this.menu.querySelectorAll("textarea[data-setting]");
    const selects = this.menu.querySelectorAll("select[data-setting]");
    inputs.forEach((input) => {
      const setting = input.dataset.setting;
      const type = input.type;
      const value = this.settings[setting];
      if (type === "checkbox") {
        input.checked = value;
      } else {
        input.value = value;
      }
    });

    selects.forEach((select) => {
      const setting = select.dataset.setting;
      const value = this.settings[setting];
      select.value = value;
    });

    textareas.forEach((textarea) => {
      const setting = textarea.dataset.setting;
      const value = this.settings[setting];
      textarea.value = value;
    });
  }

  handleMenuKeybindChange() {
    const changeKeybindButton = this.menu.querySelector(".change-keybind");
    changeKeybindButton.innerText = this.settings.menu_keybind;
    changeKeybindButton.addEventListener("click", () => {
      changeKeybindButton.innerText = "Press any key";
      const listener = (e) => {
        this.settings.menu_keybind = e.code;
        changeKeybindButton.innerText = e.code;
        ipcRenderer.send("update-setting", "menu_keybind", e.code);

        const event = new CustomEvent("juice-settings-changed", {
          detail: { setting: "menu_keybind", value: e.code },
        });
        document.dispatchEvent(event);

        this.menu.querySelector(
          ".keybind"
        ).innerText = `Press ${this.settings.menu_keybind} to toggle menu`;
        document.removeEventListener("keydown", listener);
      };
      document.addEventListener("keydown", listener);
    });
  }

  handleMenuInputChange(input) {
    const setting = input.dataset.setting;
    const type = input.type;
    const value = type === "checkbox" ? input.checked : input.value;
    this.settings[setting] = value;
    ipcRenderer.send("update-setting", setting, value);
    const event = new CustomEvent("juice-settings-changed", {
      detail: { setting: setting, value: value },
    });
    document.dispatchEvent(event);
  }

  handleMenuInputChanges() {
    const inputs = this.menu.querySelectorAll("input[data-setting]");
    const textareas = this.menu.querySelectorAll("textarea[data-setting]");
    inputs.forEach((input) => {
      input.addEventListener("change", () => this.handleMenuInputChange(input));
    });

    textareas.forEach((textarea) => {
      textarea.addEventListener("change", () =>
        this.handleMenuInputChange(textarea)
      );
    });
  }

  handleMenuSelectChange(select) {
    const setting = select.dataset.setting;
    const value = select.value;
    this.settings[setting] = value;
    ipcRenderer.send("update-setting", setting, value);
    const event = new CustomEvent("juice-settings-changed", {
      detail: { setting: setting, value: value },
    });
    if (setting === "menu_theme") {
      this.setTheme();
    }
    document.dispatchEvent(event);
  }

  handleMenuSelectChanges() {
    const selects = this.menu.querySelectorAll("select[data-setting]");
    selects.forEach((select) => {
      select.addEventListener("change", () =>
        this.handleMenuSelectChange(select)
      );
    });
  }

  handleTabChanges() {
    const tabs = this.menu.querySelectorAll(".juice.tab");
    tabs.forEach((tab) => {
      tab.addEventListener("click", () => this.handleTabChange(tab));
    });
  }

  handleTabChange(tab) {
    const tabs = this.menu.querySelectorAll(".juice.tab");
    const tabName = tab.dataset.tab;

    this.localStorage.setItem("juice-menu-tab", tabName);

    const contents = this.menu.querySelectorAll(".juice.options");
    tabs.forEach((tab) => {
      tab.classList.remove("active");
    });
    contents.forEach((content) => {
      content.classList.remove("active");
    });
    tab.classList.add("active");
    this.tabToContentMap[tab.dataset.tab].classList.add("active");
  }

  handleDropdowns() {
    const dropdowns = this.menu.querySelectorAll(".dropdown");
    dropdowns.forEach((dropdown) => {
      const dropdownTop = dropdown.querySelector(".dropdown .top");
      dropdownTop.addEventListener("click", () => {
        dropdown.classList.toggle("active");
      });
    });
  }

  handleSearch() {
    const searchInput = this.menu.querySelector(".juice.search");
    const settings = this.menu.querySelectorAll(".option:not(.custom)");
    searchInput.addEventListener("input", () => {
      const searchValue = searchInput.value.toLowerCase();
      settings.forEach((setting) => {
        setting.style.display = setting.textContent
          .toLowerCase()
          .includes(searchValue)
          ? "flex"
          : "none";

        const parent = setting.parentElement;
        if (parent.classList.contains("option-group")) {
          const children = parent.children;
          const visibleChildren = Array.from(children).filter(
            (child) => child.style.display === "flex"
          );
          parent.style.display = visibleChildren.length ? "flex" : "none";
        }
      });
    });
  }

  handleButtons() {
    const openSwapperFolder = this.menu.querySelector("#open-swapper-folder");
    openSwapperFolder.addEventListener("click", () => {
      ipcRenderer.send("open-swapper-folder");
    });

    const openScriptsFolder = this.menu.querySelector("#open-scripts-folder");
    openScriptsFolder.addEventListener("click", () => {
      ipcRenderer.send("open-scripts-folder");
    });

    const importSettings = this.menu.querySelector("#import-settings");
    importSettings.addEventListener("click", () => {
      const modal = this.createModal(
        "Import settings",
        "Paste your settings here to import them"
      );

      const bottom = modal.querySelector(".bottom");

      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "Paste settings here";
      bottom.appendChild(input);

      const confirm = document.createElement("button");
      confirm.innerText = "Confirm";
      confirm.classList.add("juice-button");
      confirm.addEventListener("click", () => {
        try {
          if (!input.value) return;

          const settings = JSON.parse(input.value);
          for (const key in settings) {
            this.settings[key] = settings[key];
            ipcRenderer.send("update-setting", key, settings[key]);

            const event = new CustomEvent("juice-settings-changed", {
              detail: { setting: key, value: settings[key] },
            });
            document.dispatchEvent(event);

            this.initMenu();
          }
          modal.remove();
        } catch (error) {
          console.error("Error importing settings:", error);
        }
      });

      bottom.appendChild(confirm);

      this.menu.querySelector(".menu").appendChild(modal);
    });

    const exportSettings = this.menu.querySelector("#export-settings");
    exportSettings.addEventListener("click", () => {
      const modal = this.createModal(
        "Export settings",
        "Copy your settings here to export them"
      );

      const bottom = modal.querySelector(".bottom");

      const textarea = document.createElement("textarea");
      textarea.value = JSON.stringify(this.settings, null, 2);
      bottom.appendChild(textarea);

      const copy = document.createElement("button");
      copy.innerText = "Copy";
      copy.classList.add("juice-button");
      copy.addEventListener("click", () => {
        navigator.clipboard.writeText(textarea.value);
      });

      bottom.appendChild(copy);

      this.menu.querySelector(".menu").appendChild(modal);
    });

    let clickCounter = 0;
    const resetJuiceSettings = this.menu.querySelector("#reset-juice-settings");
    resetJuiceSettings.addEventListener("click", () => {
      clickCounter++;
      if (clickCounter === 1) {
        resetJuiceSettings.style.background = "rgba(var(--red), 0.25)";
        const text = resetJuiceSettings.querySelector(".text");
        text.innerText = "Are you sure?";

        const description = resetJuiceSettings.querySelector(".description");
        description.innerText =
          "This will restart the client and reset all settings. Click again to confirm";
      } else if (clickCounter === 2) {
        ipcRenderer.send("reset-juice-settings");
      }
    });

    const remoteToStaticLinks = this.menu.querySelector(
      "#remote-to-static-links"
    );
    remoteToStaticLinks.addEventListener("click", async () => {
      const localStorageKeys = [
        "SETTINGS___SETTING/CROSSHAIR___SETTING/STATIC_URL___SETTING",
        "SETTINGS___SETTING/SNIPER___SETTING/SCOPE_URL___SETTING",
        "SETTINGS___SETTING/BLOCKS___SETTING/TEXTURE_URL___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG1___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG2___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG3___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG4___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG5___SETTING",
        "SETTINGS___SETTING/SKYBOX___SETTING/TEXTURE_IMG6___SETTING",
      ];

      const juiceKeys = ["css_link", "hitmarker_link", "killicon_link"];

      const encodeImage = async (url) => {
        if (!url || url === "") return "";

        try {
          const response = await fetch(url);
          if (!response.ok)
            throw new Error(`Invalid response: ${response.status}`);
          const blob = await response.blob();
          return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onloadend = () => resolve(reader.result);
            reader.readAsDataURL(blob);
          });
        } catch (error) {
          console.error(`Error fetching or converting ${url}:`, error);
        }
      };

      for (const key of localStorageKeys) {
        const url = localStorage.getItem(key).replace(/"/g, "");
        const data = await encodeImage(url);
        localStorage.setItem(key, data);
      }

      for (const key of juiceKeys) {
        const url = this.settings[key];
        const data = await encodeImage(url);
        this.settings[key] = data;
        ipcRenderer.send("update-setting", key, data);

        const event = new CustomEvent("juice-settings-changed", {
          detail: { setting: key, value: this.settings[key] },
        });
        document.dispatchEvent(event);

        this.initMenu();
      }
    });
  }

  createModal(title, description) {
    const modal = document.createElement("div");
    modal.id = "modal";

    modal.innerHTML = `
    <div class="content">
      <div class="close">
        <i class="fas fa-times"></i>
      </div>
      <div class="top">
        <span class="title">${title}</span>
        <span class="description">${description}</span>
      </div>
      <div class="bottom">
      </div>
    </div>
';
    const close = modal.querySelector(".close");
    close.addEventListener("click", () => modal.remove());

    modal.addEventListener("click", (e) => {
      if (e.target.id === "modal") modal.remove();
    });

    return modal;
  }
}

module.exports = Menu;
</script>
<style>
  @import url("https://fonts.cdnfonts.com/css/satoshi");
@import url("https://irrvlo.xyz/nameless-font.css");

.menu[data-theme="dark"] {
    --dark: 20, 20, 20;
    --light: 255, 255, 255;
    --orange: 255, 147, 45;
    --green: 172, 250, 112;
    --blue: 88, 101, 242;
    --red: 255, 0, 0;
    --hover-dark: 31, 31, 31;
    --hover-light: 255, 255, 255, 0.05;
    --border: 255, 255, 255, 0.15;
    --border-active: 255, 255, 255, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 255, 255, 255, 0.5;
    --opacity-quarter: 255, 255, 255, 0.25;
}

.menu[data-theme="light"] {
    --dark: 202, 253, 211;
    --light: 0, 0, 0;
    --orange: 255, 185, 120;
    --green: 172, 250, 112;
    --blue: 88, 101, 242;
    --red: 255, 0, 0;
    --hover-dark: 202, 253, 211;
    --hover-light: 0, 0, 0, 0.05;
    --border: 0, 0, 0, 0.15;
    --border-active: 0, 0, 0, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 0, 0, 0, 0.5;
    --opacity-quarter: 0, 0, 0, 0.25;
}

.menu[data-theme="juice"] {
    --dark: 255, 147, 45;
    --light: 255, 239, 224;
    --orange: 172, 250, 112;
    --green: 255, 147, 45;
    --blue: 88, 101, 242;
    --red: 255, 0, 0;
    --hover-dark: 255, 239, 224;
    --hover-light: 0, 0, 0, 0.1;
    --border: 255, 239, 224, 0.15;
    --border-active: 0, 0, 0, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 255, 239, 224, 0.9;
    --opacity-quarter: 255, 239, 224, 0.8;
}

.menu[data-theme="inverted-juice"] {
    --dark: 83, 5, 143;
    --light: 226, 189, 255;
    --orange: 0, 108, 210;
    --green: 44, 37, 164;
    --blue: 18, 71, 185;
    --red: 255, 0, 0;
    --hover-dark: 226, 189, 255;
    --hover-light: 0, 0, 0, 0.1;
    --border: 226, 189, 255, 0.15;
    --border-active: 0, 0, 0, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 226, 189, 255, 0.9;
    --opacity-quarter: 226, 189, 255, 0.8;
}

.menu[data-theme="inverted-juice"] .about-top.header>img {
    filter: invert(1);
}

.menu[data-theme="nameless"] {
    font-family: "Forza", sans-serif;
    font-weight: 400;
    --dark: 28, 27, 34;
    --light: 255, 255, 255;
    --orange: 245, 200, 97;
    --green: 180, 236, 121;
    --blue: 97, 141, 245;
    --red: 244, 91, 91;
    --hover-dark: 34, 34, 43;
    --hover-light: 255, 255, 255, 0.05;
    --border: 255, 255, 255, 0.15;
    --border-active: 255, 255, 255, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 255, 255, 255, 0.5;
    --opacity-quarter: 255, 255, 255, 0.25;
}

.menu[data-theme="nameless"] input[type="text"],
.menu[data-theme="nameless"] textarea,
.menu[data-theme="nameless"] select {
    font-family: "Forza", sans-serif !important;
}

.menu[data-theme="kirka-arena"] {
    background: linear-gradient(to bottom left, rgb(0, 141, 0), rgb(19, 51, 1));
    --dark: 8, 96, 4;
    --light: 255, 255, 255;
    --orange: 11, 197, 6;
    --green: 172, 250, 112;
    --blue: 88, 101, 242;
    --red: 255, 0, 0;
    --hover-dark: 0, 129, 0;
    --hover-light: 0, 0, 0, 0.2;
    --border: 255, 255, 255, 0.15;
    --border-active: 255, 255, 255, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 255, 255, 255, 0.75;
    --opacity-quarter: 255, 255, 255, 0.5;
}

.menu[data-theme="kirka-arena"]:before {
    content: "";
    position: absolute;
    border-radius: 0.75rem;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url(https://irrvlo.xyz/topo.svg);
    background-size: cover;
    background-position: center;
    mix-blend-mode: color-dodge;
    opacity: 0.5;
    pointer-events: none;
}

.menu[data-theme="kirka"] {
    font-family: "Exo 2", sans-serif;
    border: 4px solid #3e4d7c;
    border-top: 4px solid #4d5c8b;
    border-bottom: 4px solid #26335b;
    border-radius: 0;
    box-shadow: unset;
    --dark: 59, 73, 117;
    --light: 255, 255, 255;
    --orange: 255, 185, 20;
    --green: 28, 206, 108;
    --blue: 47, 128, 237;
    --red: 255, 102, 102;
    --hover-dark: 34, 34, 43;
    --hover-light: 255, 255, 255, 0.05;
    --border: 255, 255, 255, 0.15;
    --border-active: 255, 255, 255, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 255, 255, 255, 0.5;
    --opacity-quarter: 255, 255, 255, 0.25;
}

.menu[data-theme="catppuccin-mocha"] {
    --dark: 30, 30, 46;
    --light: 205, 214, 244;
    --orange: 203, 166, 247;
    --green: 166, 227, 161;
    --blue: 137, 180, 250;
    --red: 243, 139, 168;
    --hover-dark: 24, 24, 37;
    --hover-light: 205, 214, 244, 0.05;
    --border: 205, 214, 244, 0.15;
    --border-active: 205, 214, 244, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 205, 214, 244, 0.5;
    --opacity-quarter: 205, 214, 244, 0.25;
}

.menu[data-theme="flexoki"] {
    --dark: 16, 15, 15;
    --light: 206, 205, 195;
    --orange: 218, 112, 44;
    --green: 135, 154, 57;
    --blue: 67, 133, 190;
    --red: 209, 77, 65;
    --hover-dark: 31, 31, 31;
    --hover-light: 206, 205, 195, 0.05;
    --border: 206, 205, 195, 0.15;
    --border-active: 206, 205, 195, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 206, 205, 195, 0.5;
    --opacity-quarter: 206, 205, 195, 0.25;
}

.menu[data-theme="legacy"] {
    background: linear-gradient(to bottom,
            rgba(var(--green), 0.8),
            rgba(var(--orange), 0.8));
    backdrop-filter: blur(5px);
    --dark: 255, 255, 255;
    --light: 255, 255, 255;
    --orange: 255, 147, 45;
    --green: 172, 250, 112;
    --blue: 88, 101, 242;
    --red: 255, 0, 0;
    --hover-dark: 255, 255, 255;
    --hover-light: 0, 0, 0, 0.05;
    --border: 255, 255, 255, 0.15;
    --border-active: 0, 0, 0, 0.25;
    --shadow: 0, 0, 0, 0.5;
    --opacity-half: 255, 255, 255, 0.5;
    --opacity-quarter: 255, 255, 255, 0.25;
}

.menu[data-theme="legacy"] option {
    color: black;
}

.menu ::-webkit-scrollbar {
    width: 0.25rem;
    background: rgba(var(--dark), 0.1);
}

.menu ::-webkit-scrollbar-thumb {
    background: rgba(var(--border));
    border-radius: 0.5rem;
}

@keyframes rotateHue {
    0% {
        filter: hue-rotate(0deg);
    }

    100% {
        filter: hue-rotate(360deg);
    }
}

.menu i {
    font-family: "Font Awesome 6 Free" !important;
}

.menu .sidebar i {
    width: 1.25rem;
}

.menu i.fab {
    font-family: "Font Awesome 6 Brands" !important;
}

.menu {
    font-family: "Satoshi", sans-serif;
    display: none;
    width: 55rem;
    height: 36rem;
    background: rgba(var(--dark), 1);
    border-radius: 0.75rem;
    border: 1px solid rgba(var(--border));
    box-shadow: 0 0 1rem rgba(var(--shadow));
    color: rgba(var(--light), 1);
    grid-template-columns: 1fr 3fr;
    grid-template-areas: "sidebar content";
    transition: 0.3s;
    z-index: 9999;
}

.menu[data-active="true"] {
    display: grid;
}

.menu .checkbox {
    position: relative;
    display: inline-block;
    width: 3rem;
    height: 1.5rem;
}

.menu .checkbox input {
    display: none;
}

.menu .checkbox label {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(var(--border));
    border-radius: 1rem;
    cursor: pointer;
    transition: background 0.3s;
}

.menu .checkbox input:checked+label {
    background: rgba(var(--orange));
}

.menu .checkbox label:after {
    content: "";
    position: absolute;
    top: 0.25rem;
    left: 0.25rem;
    width: 1rem;
    height: 1rem;
    background: white;
    border-radius: 50%;
    transition: left 0.3s;
}

.menu .checkbox input:checked+label:after {
    left: 1.75rem;
}

.menu>.content {
    grid-area: content;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    overflow-y: scroll;
}

.menu .content input[type="text"] {
    width: 40%;
    box-sizing: border-box;
    height: 2.5rem;
    padding: 0 1rem;
    background: rgba(var(--dark), 0.1);
    border: 0.1rem solid rgba(var(--border));
    border-radius: 0.5rem;
    color: rgb(var(--light));
    font-family: "Satoshi", sans-serif;
    outline: none;
}

.menu input[type="text"]::placeholder {
    color: rgba(var(--opacity-half));
}

.menu .footer {
    box-sizing: border-box;
    margin-top: auto;
    display: flex;
    flex-direction: column;
    color: rgba(var(--opacity-half));
    font-size: 0.9rem;
}

.menu .footer .bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.menu .juice.options {
    display: none;
    gap: 1rem;
    flex-direction: column;
    height: 100%;
}

.menu .juice.options.active {
    display: flex;
}

.menu .juice.tab {
    width: 100%;
    box-sizing: border-box;
    height: 3rem;
    padding: 0 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: rgba(var(--opacity-half));
    border: 0.1rem solid transparent;
    cursor: pointer;
    transition: 0.2s;
    border-radius: 0.5rem;
}

.menu .juice.tab:hover {
    background: rgba(var(--hover-light));
}

.menu .juice.tab.active {
    background: rgba(var(--dark), 0.1);
    color: rgba(var(--light));
    border: 0.1rem solid rgba(var(--border));
}

.menu .option-group {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    background: rgba(var(--hover-light));
    padding: 1rem;
    border-radius: 0.5rem;
}

.menu .option-group:last-child {
    margin-bottom: 1rem;
}

.menu .option-group.bottom {
    margin-top: auto;
}

.menu .option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
}

.menu .option.dropdown {
    flex-direction: column;
    align-items: flex-start;
    overflow: hidden;
    transition: 0.2s;
    gap: 0;
}

.menu .option.dropdown .content {
    height: 0;
    width: 100%;
}

.menu .option.dropdown.active .content {
    height: 100%;
}

.menu .option.dropdown i {
    transition: 0.2s;
    transform: rotate(-90deg);
}

.menu .option.dropdown.active i {
    transform: rotate(0deg);
}

.menu textarea {
    margin-top: 1rem;
    min-height: 6rem;
    width: 100%;
    resize: vertical;
    padding: 0.5rem;
    background: rgba(var(--dark), 0.2);
    border: 0.1rem solid rgba(var(--border));
    border-radius: 0.25rem;
    color: rgb(var(--light));
    font-family: "Satoshi", sans-serif;
    outline: none;
}

.menu .range {
    appearance: none;
    width: 45%;
    height: 0.5rem;
    background: rgba(var(--border));
    border-radius: 0.25rem;
    outline: none;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.menu .range::-webkit-slider-thumb {
    appearance: none;
    width: 1rem;
    height: 1rem;
    background: rgba(var(--orange));
    border-radius: 50%;
    cursor: pointer;
}

.menu select {
    width: 50%;
    height: 2.5rem;
    padding: 0 1rem;
    background: rgba(var(--dark), 0.1);
    border: 0.1rem solid rgba(var(--border));
    border-radius: 0.5rem;
    color: rgb(var(--light));
    font-family: "Satoshi", sans-serif;
    outline: none;
    appearance: none;
}

.menu option {
    background: rgba(var(--dark), 1);
    height: 2.5rem;
    color: rgb(var(--light));
}

.menu .option>.left {
    display: flex;
    flex-direction: column;
}

.menu .option .description {
    font-size: 0.8rem;
    color: rgba(var(--opacity-half));
}

.menu .requries-restart,
.menu .requires-refresh {
    position: relative;
}

.menu .requires-restart>span:not(.description):after {
    content: "Requires Restart";
    color: rgba(var(--red));
    font-size: 0.75rem;
    padding: 0.15rem 0.3rem;
    background: rgba(var(--red), 0.1);
    border-radius: 0.25rem;
    margin-left: 0.25rem;
}

.menu .requires-refresh>span:not(.description):after {
    content: "Requires Refresh";
    color: rgba(var(--blue));
    font-size: 0.75rem;
    padding: 0.15rem 0.3rem;
    background: rgba(var(--blue), 0.1);
    border-radius: 0.25rem;
    margin-left: 0.25rem;
}

.menu .search-input {
    box-sizing: border-box;
    width: 100%;
    height: 2.5rem;
    padding: 0 1rem;
    background: rgba(var(--dark), 0.1);
    border: 0.1rem solid rgba(var(--border));
    border-radius: 0.5rem;
    color: rgb(var(--light));
    font-family: "Satoshi", sans-serif;
    outline: none;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    flex-shrink: 0;
}

.menu .search-input input {
    background: transparent;
    border: none;
    color: rgb(var(--light));
    font-family: "Satoshi", sans-serif;
    outline: none;
}

.menu .search-input i {
    color: rgba(var(--opacity-half));
    font-size: 0.75rem;
}

.menu .sep {
    width: 100%;
    height: 1px;
    margin: 0.75rem 0;
    background: rgba(var(--border));
    flex-shrink: 0;
}

.menu .sidebar {
    grid-area: sidebar;
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    border-right: rgba(var(--border)) 1px solid;
}

.menu .tab-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.menu .change-keybind {
    width: fit-content;
    height: 2.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(var(--dark), 0.1);
    border: 0.1rem solid rgba(var(--border));
    border-radius: 0.5rem;
    color: rgba(var(--opacity-half));
    cursor: pointer;
    transition: 0.2s;
    font-family: "Satoshi", sans-serif;
    outline: none;
}

.menu .change-keybind:hover {
    background: rgba(var(--hover-light));
}

.menu .change-keybind.active {
    color: rgba(var(--opacity-half));
    background: rgba(var(--border-active));
}

.menu .sidebar span {
    font-size: 0.8rem;
    color: rgba(var(--opacity-half));
}

.about-top {
    display: flex;
    align-items: center;
    height: 100%;
    gap: 1rem;
}

.about-top img {
    width: 6rem;
    height: 6rem;
    object-fit: contain;
    -webkit-user-drag: none;
}

.about-top.compact img {
    width: 3rem;
    height: 3rem;
}

.about-top .about-info {
    display: flex;
    width: 100%;
    flex-direction: column;
}

.about-top.compact .about-info {
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
}

.about-top .title {
    display: flex;
    font-size: 3rem;
}

.about-top.compact .title {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.about-info .about-more {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.about-buttons {
    display: flex;
    gap: 0.5rem;
}

.about-buttons a {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    color: white;
    text-decoration: none;
    position: relative;
    border-radius: 0.5rem;
    width: 2.75rem;
    height: 2.75rem;
    font-size: 1.25rem;
    transition: 0.2s;
}

.about-buttons a.alt {
    font-size: 0.95rem !important;
    padding: 0 1rem;
    width: max-content !important;
}

.about-buttons a .custom-border {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0.2rem solid rgba(255, 255, 255, 0.25);
    border-radius: 0.5rem;
}

.about-discord {
    background: #5865f2;
}

.about-discord:hover {
    background: #626ffc;
}

.about-github {
    background: #141414;
}

.about-github:hover {
    background: #1f1f1f;
}

.about-kirka {
    background: #37477c;
}

.about-kirka:hover {
    background: #3f518d;
}

.about-kirka img {
    width: 1.5rem;
    height: 1.5rem;
    object-fit: contain;
}

.about-kirkatools {
    background: rgb(31 7 0);
}

.about-kirkatools:hover {
    background: rgb(41 9 0);
}

.about-juice {
    background: rgba(var(--orange));
}

.about-juice:hover {
    background: rgba(var(--orange), 0.9);
}

.author {
    color: rgba(var(--light), 0.5);
}

.credits {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.credits>div {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.25rem;
}

.credits p {
    font-size: 0.8rem;
    color: rgba(var(--light), 0.8);
    margin: unset;
}

.credits .title {
    font-size: 1rem;
}

.juice-button {
    width: 100%;
    height: 2.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: rgba(var(--dark), 0.1);
    color: rgba(var(--light));
    border: 0.1rem solid rgba(var(--border));
    border-radius: 0.5rem;
    cursor: pointer;
    transition: 0.2s;
    font-family: "Satoshi", sans-serif;
    outline: none;
}

.juice-button.large {
    height: 3rem;
}

.juice-button:hover {
    background: rgba(var(--hover-light));
}

#modal {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: grid;
    place-items: center;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 0.75rem;
    z-index: 9999;
}

#modal .content {
    position: relative;
    width: 30rem;
    height: 15rem;
    background: rgba(var(--dark), 1);
    border-radius: 0.75rem;
    color: rgba(var(--light), 1);
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    gap: 1rem;
    justify-content: space-between;
}

#modal .bottom,
#modal .top {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

#modal .title {
    font-size: 1.5rem;
}

#modal .description {
    font-size: 0.9rem;
    color: rgba(var(--opacity-half));
}

#modal input {
    width: 100%;
}

#modal .close {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    display: grid;
    place-items: center;
    background: rgba(var(--dark), 0.1);
    color: rgba(var(--opacity-half));
    border-radius: 0.5rem;
    cursor: pointer;
    transition: 0.2s;
}

#modal .close:hover {
    color: rgba(var(--light));
}
</style>
